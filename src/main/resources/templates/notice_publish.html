<!DOCTYPE html>
<html lang="zh" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>通知发布</title>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
</head>
<body>
    <!-- 页面内容 -->
    <header>
        <a href=""><img src="向左的箭头图片URL" alt="返回"></a>
        <h1>发布新通知</h1>
    </header>

    <div id="toastContainer" class="position-fixed bottom-0 right-0 p-3">
        <!-- 获取后端传递的发布状态 -->
        <div th:if="${status != null}" th:text="${status}" class="d-none" id="publishStatus"></div>
    </div>

    <script th:inline="javascript">
        $(document).ready(function() {
            var status = $('#publishStatus').text(); // 获取发布状态

            if (status !== '') {
                var toastContainer = $('#toastContainer');


                // 生成 Toasts 弹框
                var toastHTML = '<div class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-autohide="true">' +
                    '<div class="toast-header">' +
                    '<strong class="mr-auto">发布状态</strong>' +
                    '<button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close">' +
                    '<span aria-hidden="true">&times;</span>' +
                    '</button>' +
                    '</div>' +
                    '<div class="toast-body">' +
                    status +
                    '</div>' +
                    '</div>';

                toastContainer.append(toastHTML);

                // 监听 Toasts 弹框关闭动作
                $('.toast').on('hidden.bs.toast', function () {
                    // 执行重定向操作
                    window.location.href = 'localhost:8080/self_study_room/admin/notice'; // 替换成你的重定向 URL
                });

                // 显示 Toasts 弹框
                $('.toast').toast('show');
            }
        });
    </script>
</body>
</html>